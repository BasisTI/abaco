<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
   <changeSet author="basis (generated)" id="1600907571881-1">
       <addColumn tableName="analise" >
           <column name="is_divergencia" type="BOOLEAN"/>
           <column name="analise_divergence_id" type="BIGINT"/>
       </addColumn>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-2">
       <addForeignKeyConstraint baseColumnNames="analise_divergence_id"
                                baseTableName="analise"
                                constraintName="FK_analise_divergence_id"
                                deferrable="false"
                                initiallyDeferred="false"
                                referencedColumnNames="id"
                                referencedTableName="analise"/>

   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-3">
      <createTable tableName="grupo">
         <column name="id_analise" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="bloqueado" type="BOOLEAN"/>
         <column name="data_criacao" type="TIMESTAMP WITHOUT TIME ZONE"/>
         <column name="data_homologacao" type="TIMESTAMP WITHOUT TIME ZONE"/>
         <column name="dias_de_garantia" type="INT"/>
         <column name="equipe" type="VARCHAR(255)"/>
         <column name="identificador_analise" type="VARCHAR(255)"/>
         <column name="metodo_contagem" type="VARCHAR(255)"/>
         <column name="organizacao" type="VARCHAR(255)"/>
         <column name="pf_ajustado" type="VARCHAR(255)"/>
         <column name="pf_total" type="VARCHAR(255)"/>
         <column name="sistema" type="VARCHAR(255)"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-4">
      <createTable tableName="impacto">
         <column name="id" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="descricao" type="VARCHAR(255)"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-5">
      <createTable tableName="pe_analitico">
         <column name="row_number" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="analise_id" type="BIGINT"/>
         <column name="classificacao" type="VARCHAR(255)"/>
         <column name="complexidade" type="VARCHAR(255)"/>
         <column name="data_homologacao_software" type="VARCHAR(255)"/>
         <column name="equipe_responsavel_id" type="BIGINT"/>
         <column name="id_funcionalidade" type="BIGINT"/>
         <column name="id_modulo" type="BIGINT"/>
         <column name="id_funcao_dados" type="BIGINT"/>
         <column name="id_sistema" type="BIGINT"/>
         <column name="name" type="VARCHAR(255)"/>
         <column name="nome" type="VARCHAR(255)"/>
         <column name="nome_equipe" type="VARCHAR(255)"/>
         <column name="nome_funcionalidade" type="VARCHAR(255)"/>
         <column name="nome_modulo" type="VARCHAR(255)"/>
         <column name="pf" type="numeric(19, 2)"/>
         <column name="sigla" type="VARCHAR(255)"/>
         <column name="tipo" type="VARCHAR(255)"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-6">
      <createTable tableName="vw_analise_soma_pf">
         <column name="analise_id" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="pf_gross" type="numeric(19, 2)"/>
         <column name="pf_total" type="numeric(19, 2)"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-7">
      <createTable tableName="vw_funcao_dados">
         <column name="id" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="analise_id" type="BIGINT"/>
         <column name="complexidade" type="VARCHAR(255)"/>
         <column name="deflator" type="VARCHAR(255)"/>
         <column name="fator_ajuste_id" type="VARCHAR(255)"/>
         <column name="funcionalidade_id" type="BIGINT"/>
         <column name="grosspf" type="numeric(19, 2)"/>
         <column name="id_modulo" type="BIGINT"/>
         <column name="name" type="VARCHAR(255)"/>
         <column name="nome_funcionalidade" type="VARCHAR(255)"/>
         <column name="nome_modulo" type="VARCHAR(255)"/>
         <column name="pf" type="numeric(19, 2)"/>
         <column name="sustantation" type="VARCHAR(255)"/>
         <column name="tipo" type="VARCHAR(255)"/>
         <column name="total_ders" type="INT"/>
         <column name="total_rlrs" type="INT"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-8">
      <createTable tableName="vw_funcao_transacao">
         <column name="id" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="analise_id" type="BIGINT"/>
         <column name="complexidade" type="VARCHAR(255)"/>
         <column name="deflator" type="VARCHAR(255)"/>
         <column name="fator_ajuste_id" type="VARCHAR(255)"/>
         <column name="funcionalidade_id" type="BIGINT"/>
         <column name="grosspf" type="numeric(19, 2)"/>
         <column name="id_modulo" type="BIGINT"/>
         <column name="name" type="VARCHAR(255)"/>
         <column name="nome_funcionalidade" type="VARCHAR(255)"/>
         <column name="nome_modulo" type="VARCHAR(255)"/>
         <column name="pf" type="numeric(19, 2)"/>
         <column name="sustantation" type="VARCHAR(255)"/>
         <column name="tipo" type="VARCHAR(255)"/>
         <column name="total_ders" type="INT"/>
         <column name="total_alrs" type="INT"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-9">
      <createTable tableName="vw_resumo">
         <column name="row_number" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="alta" type="BIGINT"/>
         <column name="analise_id" type="BIGINT"/>
         <column name="baixa" type="BIGINT"/>
         <column name="inm" type="BIGINT"/>
         <column name="media" type="BIGINT"/>
         <column name="pf_ajustada" type="VARCHAR(255)"/>
         <column name="pf_total" type="VARCHAR(255)"/>
         <column name="quantidade_tipo" type="BIGINT"/>
         <column name="sem" type="BIGINT"/>
         <column name="tipo" type="VARCHAR(255)"/>
      </createTable>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-10">
      <addPrimaryKey columnNames="row_number"
                     constraintName="baseline_analiticoPK"
                     tableName="baseline_analitico"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-11">
      <addPrimaryKey columnNames="row_number"
                     constraintName="baseline_sinteticoPK"
                     tableName="baseline_sintetico"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-12">
      <addPrimaryKey columnNames="id_analise" constraintName="grupoPK" tableName="grupo"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-13">
      <addPrimaryKey columnNames="id" constraintName="impactoPK" tableName="impacto"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-14">
      <addPrimaryKey columnNames="row_number"
                     constraintName="pe_analiticoPK"
                     tableName="pe_analitico"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-15">
      <addPrimaryKey columnNames="analise_id"
                     constraintName="vw_analise_soma_pfPK"
                     tableName="vw_analise_soma_pf"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-16">
      <addPrimaryKey columnNames="id"
                     constraintName="vw_funcao_dadosPK"
                     tableName="vw_funcao_dados"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-17">
      <addPrimaryKey columnNames="id"
                     constraintName="vw_funcao_transacaoPK"
                     tableName="vw_funcao_transacao"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-18">
      <addPrimaryKey columnNames="row_number"
                     constraintName="vw_resumoPK"
                     tableName="vw_resumo"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-19">
      <addUniqueConstraint columnNames="nome"
                           constraintName="UC_FUNCAO_DADOS_VERSIONAVELNOME_COL"
                           tableName="funcao_dados_versionavel"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-20">
      <addUniqueConstraint columnNames="descricao"
                           constraintName="UC_IMPACTODESCRICAO_COL"
                           tableName="impacto"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-21">
      <addUniqueConstraint columnNames="nome"
                           constraintName="UC_STATUS_ANALISENOME_COL"
                           tableName="status_analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-22">
      <addUniqueConstraint columnNames="preposto"
                           constraintName="UC_TIPO_EQUIPEPREPOSTO_COL"
                           tableName="tipo_equipe"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-23">
      <addForeignKeyConstraint baseColumnNames="user_id"
                               baseTableName="jhi_user_authority"
                               constraintName="FK290okww5jujghp4el5i7mgwu0"
                               deferrable="false"
                               initiallyDeferred="false"
                               referencedColumnNames="id"
                               referencedTableName="jhi_user"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-24">
      <dropForeignKeyConstraint baseTableName="analise_compartilhada"
                                constraintName="fk_equipe_analise_id"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-25">
      <dropUniqueConstraint constraintName="jhi_social_user_connection_user_id_provider_id_provider_use_key"
                            tableName="jhi_social_user_connection"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-26">
      <dropUniqueConstraint constraintName="jhi_social_user_connection_user_id_provider_id_rank_key"
                            tableName="jhi_social_user_connection"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-27">
      <dropView viewName="baseline_analitico"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-28">
      <dropView viewName="baseline_sintetico"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-29">
      <dropView viewName="grupo"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-30">
      <dropView viewName="pe_analitico"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-31">
      <dropView viewName="vw_analise_soma_pf"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-32">
      <dropView viewName="vw_funcao_dados"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-33">
      <dropView viewName="vw_funcao_transacao"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-34">
      <dropView viewName="vw_resumo"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-35">
      <dropColumn columnName="ordem" tableName="fator_ajuste"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-36">
      <dropForeignKeyConstraint baseTableName="tipo_equipe"
                                constraintName="FK13avedfytmj9qqbp16digt32l"/>
      <addForeignKeyConstraint baseColumnNames="user_id"
                               baseTableName="tipo_equipe"
                               constraintName="FK13avedfytmj9qqbp16digt32l"
                               referencedColumnNames="id"
                               referencedTableName="jhi_user"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-37">
      <dropForeignKeyConstraint baseTableName="analise" constraintName="FKmp52wtm9y7irydk0m512vnuop"/>
      <addForeignKeyConstraint baseColumnNames="status_id"
                               baseTableName="analise"
                               constraintName="FKmp52wtm9y7irydk0m512vnuop"
                               referencedColumnNames="id"
                               referencedTableName="status_analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-38">
      <dropNotNullConstraint columnDataType="bigint"
                             columnName="analise_id"
                             tableName="analise_compartilhada"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-39">
      <addNotNullConstraint columnDataType="boolean"
                            columnName="ativo"
                            tableName="status_analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-40">
      <dropNotNullConstraint columnDataType="boolean" columnName="bloqueado" tableName="analise"/>
      <dropDefaultValue columnDataType="boolean" columnName="bloqueado" tableName="analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-41">
      <dropDefaultValue columnDataType="boolean"
                        columnName="clonada_para_equipe"
                        tableName="analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-42">
      <dropNotNullConstraint columnDataType="bigint"
                             columnName="contratos_id"
                             tableName="manual_contrato"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-43">
      <addNotNullConstraint columnDataType="varchar(255)"
                            columnName="descricao"
                            tableName="nomenclatura"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-44">
      <dropNotNullConstraint columnDataType="varchar(255)"
                             columnName="description"
                             tableName="jhi_authority"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-45">
      <addNotNullConstraint columnDataType="boolean"
                            columnName="divergencia"
                            tableName="status_analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-46">
      <addNotNullConstraint columnDataType="varchar(255)"
                            columnName="email_preposto"
                            tableName="tipo_equipe"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-47">
      <dropNotNullConstraint columnDataType="boolean"
                             columnName="enviar_baseline"
                             tableName="analise"/>
      <dropDefaultValue columnDataType="boolean"
                        columnName="enviar_baseline"
                        tableName="analise"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-48">
      <dropNotNullConstraint columnDataType="bigint"
                             columnName="equipe_id"
                             tableName="analise_compartilhada"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-49">
      <dropNotNullConstraint columnDataType="varchar(255)"
                             columnName="equipe_nome"
                             tableName="analise_compartilhada"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-50">
      <dropNotNullConstraint columnDataType="bigint"
                             columnName="manual_id"
                             tableName="manual_contrato"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-51">
      <addNotNullConstraint columnDataType="varchar(255)"
                            columnName="nome"
                            tableName="nomenclatura"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-52">
      <addNotNullConstraint columnDataType="varchar(255)"
                            columnName="preposto"
                            tableName="tipo_equipe"/>
   </changeSet>
   <changeSet author="basis (generated)" id="1600907571881-53">
      <dropNotNullConstraint columnDataType="boolean"
                             columnName="view_only"
                             tableName="analise_compartilhada"/>
      <dropDefaultValue columnDataType="boolean"
                        columnName="view_only"
                        tableName="analise_compartilhada"/>
   </changeSet>
</databaseChangeLog>
