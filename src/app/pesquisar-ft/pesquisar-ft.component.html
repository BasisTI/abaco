<div class="ui-g ui-fluid">
    <div class="card card-w-title">
        <div class="ui-g-12">

            <div class="ui-g-6">
                <div class="ui-g-12">
                    <div class="ui-g ui-md-12" style="margin-bottom: 25px; margin-top: 25px">
                        <div class="ui-g-12 ui-md-12 ui-sm-12" style="margin-bottom: 05px">
                            <label>Módulo</label>
                            <p-dropdown [filter]="true" optionLabel="nome" name="modulo"
                                [placeholder]="this.getLabel('Analise.Analise.Selecione')"
                                (onChange)="moduloSelected($event.value)" [(ngModel)]="moduloSelecionado"
                                [options]="modulos" [autoWidth]="false">
                            </p-dropdown>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui-g-6">
                <div class="ui-g-12">
                    <div class="ui-g ui-md-12" style="margin-bottom: 25px; margin-top: 25px">
                        <div class="ui-g-12 ui-md-12 ui-sm-12" style="margin-bottom: 05px">
                            <label>Funcionalidade</label>
                            <p-dropdown [filter]="true" required id="idTipoContagemFormAnalise" name="funcionalidades"
                                optionLabel="nome" [placeholder]="this.getLabel('Analise.Analise.Selecione')"
                                [options]="funcionalidades" [autoWidth]="false">
                            </p-dropdown>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui-g-2 ui-md-2 ui-sm-12">
                <app-blue-button id="idBtnPesquisarComponentSistema" buttonIcon="ui-icon-search"
                    [buttonLabel]="this.getLabel('Global.Botoes.Pesquisar')"
                    (click)="performSearch()">
                </app-blue-button>
            </div>

            <p-fieldset [legend]="this.getLabel('Analise.Analise.Fases')" [collapsed]="true" >
                <div class="ui-g-12 ui-md-12 ui-sm-12" style="margin-bottom: 05px">
                    <p-dataTable dataKey="id"
                        [emptyMessage]="this.getLabel('Analise.Analise.Mensagens.msgSelecioneContratoParaEscolherFases')"
                        [value]="funcoesTransacoes" id="idTabelaFases" [(selection)]="analise.esforcoFases"
                        [headerCheckboxToggleAllPages]="true" [toggleable]="true" scrollable="true" scrollWidth="100%" >
                        <p-header translate="Analise.Analise.Fases">Funções de Transação</p-header>

                        <p-column selectionMode="multiple" [style]="{'width':'40px'}">
                        </p-column>

                        <p-column [header]="this.getLabel('Cadastros.FuncaoTransacao.Modulo')"
                            [style]="{'width': '100px'}">
                            <ng-template let-modulo="rowData.funcionalidade.modulo" pTemplate="body">
                                {{ modulo.nome }}
                            </ng-template>
                        </p-column>


                        <p-column [header]="this.getLabel('Cadastros.FuncaoTransacao.Funcionalidade')"
                            [style]="{'width': '130px'}">
                            <ng-template let-funcionalidade="rowData.funcionalidade" pTemplate="body">
                                {{ funcionalidade.nome }}
                            </ng-template>
                        </p-column>

                        <p-column field="name" [header]="this.getLabel('Cadastros.FuncaoTransacao.Nome')"
                            [style]="{'width': '150px'}">
                        </p-column>

                        <p-column [header]="this.getLabel('Cadastros.FuncaoTransacao.Impacto')"
                            [style]="{'width': '100px'}" field="updateImpacto(impacto)">
                            <ng-template let-impacto="rowData.impacto" pTemplate="body">
                                {{ impacto ? updateImpacto(impacto) : this.getLabel('Global.Mensagens.Nenhum') }}
                            </ng-template>
                        </p-column>

                        <p-column field="tipo" [header]="this.getLabel('Cadastros.FuncaoTransacao.Classificacao')"
                            [style]="{'width': '120px'}">
                        </p-column>

                        <p-column field="der" [header]="this.getLabel('Cadastros.FuncaoTransacao.DER(TD)')"
                            [style]="{'width': '100px'}">
                            <ng-template let-funcaoDados="rowData" pTemplate="body">
                                {{ funcaoDados.derValue() }}
                            </ng-template>
                        </p-column>

                        <p-column [header]="this.getLabel('Cadastros.FuncaoTransacao.FTR(AR)')"
                            [style]="{'width': '100px'}">
                            <ng-template let-funcaoDados="rowData" pTemplate="body">
                                {{ funcaoDados.ftrValue() }}
                            </ng-template>
                        </p-column>
                        <p-column field="complexidade"
                            [header]="this.getLabel('Cadastros.FuncaoTransacao.Complexidade')"
                            [style]="{'width': '120px'}">
                        </p-column>

                        <p-column [header]="this.getLabel('Cadastros.FuncaoTransacao.PFBruto')"
                            [style]="{'width': '100px'}">
                            <ng-template let-grossPF="rowData.grossPF" pTemplate="body">
                                {{ grossPF | number }}
                            </ng-template>
                        </p-column>

                        <p-column [header]="this.getLabel('Cadastros.FuncaoTransacao.PFLiquido')"
                            [style]="{'width': '100px'}">
                            <ng-template let-pf="rowData.pf" pTemplate="body">
                                {{ pf | number }}
                            </ng-template>
                        </p-column>

                    </p-dataTable>
                </div>
            </p-fieldset>
        </div>
    </div>
</div>